<ion-view view-title="My tasks" hide-back-button="true">

  <ion-content class="padding-top">

    <div class="list">
      <button class="item item-input-inset" style="color:lightgrey" ng-click="taskAdd()">What needs to be done?</button>
    </div>
    <!--<div class="list">-->
    <div class="button-bar" ng-show="true">
      <a class="button" ng-class="{ 'active': activeButton === 'showTaskListView' }" ng-click="showTaskList();activeButton = 'showTaskListView'"><i class="ion-ios-star"> Current</i></a>
      <a class="button" ng-class="{ 'active': activeButton === 'showCompletedTasksView' }" ng-click="showComplete();activeButton = 'showCompletedView'"><i class="ion-android-checkbox-outline"> Completed</i></a> <!-- button-energized" ng-click="showSimilar()" -->
    </div>

    <div class="showTaskListView_content" ng-show="showTaskListView">

      <div class="item item-tasks item-icon-right"  ng-repeat="task in tasks | orderObjectBy : 'time' :true | limitTo :25">
        <div ng-if="task.assigned_to == Phased.user.uid && task.status != Phased.task.STATUS_ID.COMPLETE"  class="row">

          <a class="col col-90 font14" href="#/menu/tab/tasks/{{task.key}}">
            <p>{{task.name}}</p>

            <div class="row">
              <div class="col col-10" style="margin-top: 2%;">
                <p ng-style="{'background-color': bgColor(task) }" style="height: 10px; width: 10px; border-radius: 50%;"></p>
              </div>
              <div class="col col-60">
                <div class="upperCase">
                  <p>{{status}}</p>
                </div>
              </div>

              <div class="col col-30" ng-if="task.deadline">
                <p><i class="ion-ios-calendar"></i> {{task.deadline | date : 'MMM dd'}}</p>
              </div>
            </div>
          </a>
          <i class="ion-chevron-right font24"></i>
        </div>
      </div>
      <div class="" ng-if="!loadDone">
        <ion-spinner class="spinner" style="width:35px; margin:3rem auto; display:block;"></ion-spinner>
      </div>
    </div>

    <!-- ionic list way -->
    <!--<ion-list-->
          <!--show-delete="shouldShowDelete"-->
          <!--show-reorder="shouldShowReorder"-->
          <!--can-swipe="listCanSwipe">-->
      <!--<ion-item ng-repeat="task in tasks | orderObjectBy : 'time' :true | limitTo :25"-->
                <!--class="item-thumbnail-left"-->
                <!--ng-if="task.assigned_to == Phased.user.uid && task.status != Phased.task.STATUS_ID.COMPLETE">-->

        <!--<img ng-src="">-->
        <!--<h2>{{task.name}}</h2>-->

        <!--<ion-option-button class="button-positive"-->
                           <!--ng-click="share(item)">-->
          <!--Share-->
        <!--</ion-option-button>-->
        <!--<ion-option-button class="button-assertive"-->
                           <!--ng-click="edit(item)">-->
          <!--Edit-->
        <!--</ion-option-button>-->
        <!--<ion-delete-button class="ion-minus-circled"-->
                           <!--ng-click="items.splice($index, 1)">-->
        <!--</ion-delete-button>-->
        <!--<ion-reorder-button class="ion-navicon"-->
                            <!--on-reorder="reorderItem(item, $fromIndex, $toIndex)">-->
        <!--</ion-reorder-button>-->

      <!--</ion-item>-->
    <!--</ion-list>-->

    <div class="showCompletedTasksView_content" ng-show="showCompletedTasksView">

      <!--<div class="item item-tasks item-icon-right"  ng-repeat="(taskid,task) in tasks | orderObjectBy : '-time':true">-->

      <div class="item item-tasks item-icon-right"  ng-repeat="(taskid,task) in tasks | orderBy : 'time':true | limitTo :25">
        <div ng-if="task.assigned_to == currentUser.uid && task.status == 1"  class="row">

          <a class="col col-90 font14" style="margin-top: 2%" href="#/menu/tab/tasks/{{taskid}}">
            <p>{{task.name}}</p>

            <div class="row">
              <div class="col col-10" style="margin-top: 2%;">
                <p ng-style="{'background-color': bgColor(task) }" style="height: 10px; width: 10px; border-radius: 50%;"></p>
              </div>
              <div class="col col-60">
                <div class="upperCase">
                  <p>{{status}}</p>
                </div>
              </div>

              <div class="col col-30" ng-if="task.deadline">
                <p><i class="ion-ios-calendar"></i> {{task.deadline | date : 'MMM dd'}}</p>
              </div>
            </div>
          </a>
          <i class="ion-chevron-right font24"></i>

        </div>
      </div>
    </div>

  </ion-content>
</ion-view>
